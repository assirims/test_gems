<%#= lesson.viewed(current_user) ? "\u{2705}" : "\u274C" %>
<%#= link_to lesson.title, course_lesson_path(@course, lesson) %>

<% if current_user %>
  <% if lesson.course.bought(current_user) || @course.user == current_user %>
    <% if lesson.viewed(current_user) == true %>
      <div class="text-success fa fa-check-square"></div>
    <% else %>
      <div class="text-danger fa fa-check-square"></div>
    <% end %>
  <% else %>
    <div class="fa fa-check-square"></div>
  <% end %>
  <%= link_to course_lesson_path(@course, lesson) do  %>
    <%= '(' + (lesson.row_order_rank + 1).to_s + ') ' unless lesson.row_order.nil? %>
    <%= lesson.title %>
  <% end %>

<% else %>
  <div class="fa fa-check-square"></div>
  <%= link_to course_lesson_path(@course, lesson) do %>
    <%#= lesson.row_order %>
    <%= '(' + (lesson.row_order_rank + 1).to_s + ') ' %>
    <%= lesson.title %>
  <% end %>
<% end %>


<% if current_user %>
<% if policy(lesson).edit? %>
  <div class="float-end">
    <%= link_to 'Edit', edit_course_lesson_path(@course, lesson), class: 'btn btn-sm btn-warning' %>
    <%= button_to 'Destroy', [@course, lesson], method: :delete, data: { turbo_confirm: 'Are you sure?' }, class: "btn btn-sm btn-danger", form: {style: 'display:inline-block;'} %>
  </div>
<% end %>
<% end %>
